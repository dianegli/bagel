 <!DOCTYPE html>
<meta charset="utf-8">

<style>

/*path {

  stroke: #fff;
  stroke-width: .5;
  stroke-dasharray: 1;
  fill: #afafaf;
  
}*/

#neighborhoodPopover { 
  position: absolute;     
  text-align: center;         
  padding: 2px;       
  font: 12px sans-serif;    
  background: #fff; 
  border: 0px;    
  border-radius: 8px;     
  pointer-events: none;
  opacity: 0;     
}

</style>

<body>
  <svg width="960" height="720"></svg>
  <div id='neighborhoodPopover'> </div>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/topojson.v1.min.js"></script>
<script>

/*var color = d3.scaleOrdinal(d3.schemeCategory10);*/
/*https://github.com/d3/d3-scale-chromatic/blob/master/README.md#interpolateRainbow*/

var color = d3.scaleSequential(d3.interpolateGnBu).domain([0,120]);

var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height");

d3.json("test3.json", function(error, nyc) {
  if (error) throw error;

  var path = d3.geoPath()
      .projection(d3.geoConicConformal()
      .parallels([33, 45])
      .rotate([96, -39])
      .fitSize([width, height], nyc));

  svg.selectAll("path")
      .data(nyc.features)
      .enter().append("path")
      .attr("d", path)
      .attr("stroke-width",0.2)
      .attr("stroke","white")
      .attr('fill',function(d) { return color(Math.sqrt(d.properties.total_pop));})

      .on("mouseenter", function(d) {
        console.log(d);

      d3.select(this)
      .style("stroke-width", 1.5)
      .style("stroke","black")

      d3.select("#neighborhoodPopover")
      .transition()
      .style("opacity", 1)
      .style("left", (d3.event.pageX) + "px")
      .style("top", (d3.event.pageY) + "px")
      .text(d.properties.ntaname + ", Total Population: " + d.properties.total_pop)

    })
    .on("mouseleave", function(d) { 
      d3.select(this)
      .style("stroke-width", 0)
      .style("fill",function(d) { return color(Math.sqrt(d.properties.total_pop));})

      d3.select("#cneighborhoodPopoverountyText")
      .transition()
      .style("opacity", 0);

    });

    console.log(nyc);
});

</script>
</body>
